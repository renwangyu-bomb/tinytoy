/*!
 * tinytoy.js v0.0.1 - 无聊的小玩意
 * Copyright (c) 2015 renwangyu
 * License: MIT
 */

"use strict";function cube(a){for(this.imgSrc=a.imgSrc||[];this.imgSrc.length&&6!==this.imgSrc.length;){if(!(this.imgSrc.length<6)){this.imgSrc.length=6;break}this.imgSrc[this.imgSrc.length]=this.imgSrc[this.imgSrc.length-1]}this.stage=a.stage,this.perspective=a.perspective||1e3,this.imgWh=a.wh||100}function imgclipplay(a){this.imgBox=a.imgBox,this.imgSrc=a.imgSrc||[],this.imgWidth=a.imgWidth||300,this.imgHeight=a.imgHeight||200,this.currImgIdx=0,this.timer=null,this.interval=a.ingerval||1e3}cube.prototype.init=function(){this.create(),this.handleEvent()},cube.prototype.create=function(){if(this.stage){var a=window.tinytoy.tt_util,b=["rotateY(0deg)","rotateY(90deg)","rotateY(180deg)","rotateY(270deg)","rotateX(90deg)","rotateX(270deg)"];a.addClass(this.stage,"tt-stage"),a.addStyle(this.stage,"width",this.imgWh+"px"),a.addStyle(this.stage,"height",this.imgWh+"px"),a.addStyle(this.stage,"perspective",this.perspective+"px");var c=document.createElement("div");a.addClass(c,"tt-img-container"),a.addStyle(c,"width",this.imgWh+"px"),a.addStyle(c,"height",this.imgWh+"px"),this.imgSrc.forEach(function(d,e){var f=document.createElement("img");f.setAttribute("alt","tinytoy's loading img"),f.setAttribute("src",d),a.addStyle(f,"width",this.imgWh+"px"),a.addStyle(f,"height",this.imgWh+"px"),a.addStyle(f,"-webkit-transform",b[e]+" translateZ("+this.imgWh/2+"px)"),c.appendChild(f)}.bind(this)),this.stage.appendChild(c)}},cube.prototype.handleEvent=function(){if(this.stage){var a=this.stage,b=!1,c={x:0,y:0},d=(Math.PI/180,2),e=0,f=0,g=this.stage.children[0];a.addEventListener("mousedown",function(a){b=!0,c.x=a.pageX,c.y=a.pageY},!1),a.addEventListener("mouseup",function(){b=!1},!1),a.addEventListener("mousemove",function(a){if(b){var h={x:a.pageX,y:a.pageY},i=h.x-c.x,j=h.y-c.y;e-=j*d,f+=i*d,g.style.transform="rotateX("+e+"deg) rotateY("+f+"deg)",c.x=h.x,c.y=h.y}},!1)}},imgclipplay.prototype.init=function(){this.create(),this.handleEvent()},imgclipplay.prototype.create=function(){if(this.imgBox){var a=window.tinytoy.tt_util;a.addClass(this.imgBox,"tt-imgclipplay-box"),a.addStyle(this.imgBox,"width",this.imgWidth+"px"),a.addStyle(this.imgBox,"height",this.imgHeight+"px"),this.centerPoint={x:(this.imgBox.offsetLeft+this.imgBox.offsetWidth)/2,y:(this.imgBox.offsetTop+this.imgBox.offsetHeight)/2},this.imgSrc.forEach(function(b,c){var d=document.createElement("img");d.setAttribute("alt","tinytoy's loading img"),d.setAttribute("src",b),d.setAttribute("index",c),a.addStyle(d,"width",this.imgWidth+"px"),a.addStyle(d,"height",this.imgHeight+"px"),0===c&&a.addClass(d,"curr"),this.imgBox.appendChild(d)}.bind(this))}},imgclipplay.prototype.handleEvent=function(){this.timer=setTimeout(function(){console.log(this.timer),this.timer=setTimeout(arguments.callee.bind(this),this.interval)}.bind(this),this.interval)},function(){window.tinytoy||(window.tinytoy={tt_util:{addClass:function(a,b){a.classList?a.classList.add(b):~a.className.indexOf(b)||(a.className+=b)},removeClass:function(a,b){a.classList?a.classList.remove(b):a.className=a.className.replace(new RegExp(b,"g"),"")},addStyle:function(a,b,c){a.style[b]=c}},tt_cube:function(a){var b=new cube(a);b.init()},tt_imgclipplay:function(a){var b=new imgclipplay(a);b.init()}})}();